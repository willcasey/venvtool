#/bin/bash
ENV_DIR=$HOME/.envs
function activate {
	source ~/.envs/$1/bin/activate 
}

function make {
	if [ -z $1 ]
	then
		echo "Please add a name for your virtual environment"
	else
        	virtualenv $HOME/.envs/$1
	fi
}

function remove {
	if [ -z $1 ]
	then
		echo "add a name for your virtual environment"
	else
        	rm -r $HOME/.envs/$1
		echo "removed $1 from virtual environments"
	fi
}

function printhelp {
	printf """
Usage: vnv <command> argument

General Commands:
-c <virtual_env>, --create <virtual_env>		Creates a virtual environment. 
-a <virtual_env>, --activate <virtual_env>		Activates a virtual environment. 
-rm <virtual_env>, --remove <virtual_env>		Removes a virtual environment from the directory.
-ls 							List all available virtual environments.
-d, --deactivate					Deactivates the current virtual environment.
-h, --help						Shows help for commands.
"""

}

# Loop through arguments and process them
for arg in "$@"
do
    case $arg in
	-h|--help)
	printhelp
	shift
        ;;
        -ls)
	ls $ENV_DIR
        shift        
	;;
        -c=*|--create=*)
	NAME=${arg#*=}
	make $NAME
        shift
        ;;
        -c|--create)
	NAME=$2
	make $NAME
        shift
        ;;
        -rm=*|--remove=*)
	NAME=${arg#*=}
	remove $NAME
        shift
        ;;
        -rm|--remove)
	NAME=$2
	remove $NAME
        shift
        ;;
        -a=*|--activate=*)
	VIRTUAL_ENV=${arg#*=}
        activate $VIRTUAL_ENV	
        shift
        ;;
        -a|--activate)
	VIRTUAL_ENV=$2
        activate $VIRTUAL_ENV	
        shift
        ;;
        -d|--deactivate)
        deactivate	
        shift
        ;;
        *)
        OTHER_ARGUMENTS+=("$1")
	echo "$OTHER_ARGUEMENTS is not a valid arguement"
        shift
        ;;
    esac
done
